# Team Feature - Architecture Diagram

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NEXORA TEAM SYSTEM                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     FLUTTER FRONTEND                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Events Screen (events_screen.dart)               â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  [Events Tab]    â”‚    [Teams Tab] âœ“         â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                                             â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ TeamQuestionnaireScreen             â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Q1: Event Type              â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ [Presentation â–¼]            â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                              â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Q2: Event                   â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ [Business Plan â–¼]           â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                              â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ Q3: Member Count            â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ [3                          ]   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                              â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚         [Create Team] âœ“     â”‚   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚                                     â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ Team List                           â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ [Create a Team]                â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                                 â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚ ğŸ‘¥ Team Business Plan   â”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚ Presentation - Business â”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚ ğŸ‘¥ 3 members   ğŸ‘¤ john â”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚              [Joined] âœ“ â”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚                                 â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚ ğŸ‘¥ Team Digital Cit.   â”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚ Presentation - Digital â”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚ ğŸ‘¥ 2 members   ğŸ‘¤ sarahâ”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â”‚              [Join]     â”‚  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                            â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Data Models                              â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Team (team.dart)                       â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ NexoraUser (user.dart)                 â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                            â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Services                                 â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ TeamService (team_service.dart)        â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ ApiService (api.dart)                  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ AuthService (auth_provider.dart)       â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                            â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Local Storage                            â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ SharedPreferences                      â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - nexora_token (JWT)                   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - nexora_user (JSON)                   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚
â”‚                          â†“                         â”‚  â”‚  â”‚  â”‚
â”‚                   HTTP/JSON over                   â”‚  â”‚  â”‚  â”‚
â”‚                   HTTPS (SSL/TLS)                  â”‚  â”‚  â”‚  â”‚
â”‚                          â†“                         â”‚  â”‚  â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚          NODE.JS/EXPRESS BACKEND             â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚                                               â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  API Routes (express)                   â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  /api/teams (teams.js)                  â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ GET  /school?school={school}        â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ GET  /user/current                  â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ POST / (create)                     â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â”œâ”€ POST /:id/join                      â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€ POST /:id/leave                     â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Middleware                             â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ verifyToken (auth.js)                â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - Extracts JWT from Authorization    â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚    - Sets req.userId for routes         â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                          â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Business Logic                         â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Single team per user validation      â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ School-scoped team queries           â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Team member management               â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  â€¢ Cascade delete on team leave         â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚                          â†“                    â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  PostgreSQL Database Connection        â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (db.js - pg client)                   â”‚ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚
â”‚                          â†“                         â”‚  â”‚  â”‚  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚        POSTGRESQL DATABASE                   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚                                               â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  TABLE: teams                               â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ id | name | school | event_type    â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ event_name | member_count          â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ created_by | created_at            â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                      â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ UNIQUE(created_by)                 â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ FK: created_by â†’ users.id          â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚                                               â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  TABLE: team_members                        â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ id | team_id | user_id | created_at â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚                                      â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ UNIQUE(team_id, user_id)           â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ FK: team_id â†’ teams.id (CASCADE)   â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ FK: user_id â†’ users.id (CASCADE)   â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚                                               â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  TABLE: users (existing)                    â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ id | username | email | school | .. â”‚   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚
â”‚                                                   â”‚  â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
```

---

## Data Flow Diagram

### Flow 1: Creating a Team

```
User Opens App
    â†“
Navigate to Events â†’ Teams Tab
    â†“
Click "Create a Team" Button
    â†“
TeamQuestionnaireScreen Opens
    â†“
User Fills Questionnaire (3 steps)
    â†“
Click "Create Team" Button
    â†“
[FRONTEND - TeamService.createTeam()]
â”œâ”€ Validates all fields present
â”œâ”€ Gets token from SharedPreferences
â””â”€ Sends POST /api/teams with data
    â†“
[BACKEND - POST /api/teams]
â”œâ”€ verifyToken middleware extracts JWT
â”œâ”€ Checks if user already has team
â”œâ”€ Validates required fields
â”œâ”€ INSERT INTO teams (...)
â”œâ”€ INSERT INTO team_members (...)
â”œâ”€ Returns 201 with created team
    â†“
[FRONTEND]
â”œâ”€ Parses response
â”œâ”€ Shows success toast
â”œâ”€ Returns to Teams list
â”œâ”€ Refreshes team list
â””â”€ User's team shows "Joined"
    â†“
Done âœ“
```

### Flow 2: Joining a Team

```
User Opens Teams Tab
    â†“
[FRONTEND - _loadTeamData()]
â”œâ”€ Gets user's school from SharedPreferences
â”œâ”€ Calls TeamService.fetchTeamsBySchool(school)
â”œâ”€ Calls TeamService.getUserTeam() for status
â””â”€ Displays teams list with school filter
    â†“
User Sees Team Cards
    â†“
User Clicks Team Card
    â†“
Team Detail Dialog Opens
    â†“
User Clicks "Join Team"
    â†“
[FRONTEND - TeamService.joinTeam(teamId)]
â”œâ”€ Gets token from SharedPreferences
â””â”€ Sends POST /api/teams/:id/join
    â†“
[BACKEND - POST /api/teams/:id/join]
â”œâ”€ verifyToken middleware extracts userId
â”œâ”€ Checks if user already in a team
â”œâ”€ Validates team exists
â”œâ”€ INSERT INTO team_members (teamId, userId)
â”œâ”€ Returns 200 if success
â””â”€ Returns 400 if already in team
    â†“
[FRONTEND]
â”œâ”€ If success:
â”‚  â”œâ”€ Shows success toast
â”‚  â”œâ”€ Dialog closes
â”‚  â””â”€ Refreshes list
â”œâ”€ If error:
â”‚  â”œâ”€ Shows error toast
â”‚  â””â”€ Stays in dialog
    â†“
Done âœ“ (or error shown)
```

### Flow 3: Viewing Teams in School

```
User Logs In
    â†“
SharedPreferences stores:
â”œâ”€ nexora_token (JWT)
â””â”€ nexora_user (JSON with school field)
    â†“
User Opens Events Screen
    â†“
User Taps "Teams" Tab
    â†“
EventsScreen._buildTeamsTab() runs
    â†“
[FRONTEND - _loadTeamData()]
â”œâ”€ Gets nexora_user from SharedPreferences
â”œâ”€ Extracts user.school value
â”œâ”€ Calls TeamService.fetchTeamsBySchool(school, token)
â””â”€ Returns List<Team>
    â†“
[BACKEND - GET /api/teams/school?school=...]
â”œâ”€ verifyToken validates JWT
â”œâ”€ Queries database:
â”‚  SELECT t.*, u.username FROM teams t
â”‚  JOIN users u ON t.created_by = u.id
â”‚  WHERE t.school = $1
â””â”€ Returns array of teams
    â†“
[FRONTEND]
â”œâ”€ Parses response (Team.fromJson)
â”œâ”€ Builds ListView of team cards
â”œâ”€ Each card shows:
â”‚  â”œâ”€ Team name
â”‚  â”œâ”€ Event type + name
â”‚  â”œâ”€ Member count
â”‚  â”œâ”€ Creator name
â”‚  â””â”€ Join button OR Joined chip
â””â”€ List updates on every tab switch
    â†“
User Sees Teams
    â†“
Done âœ“
```

---

## Constraint Enforcement Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Single Team Per User Constraint Enforcement       â”‚
â”‚                                                     â”‚
â”‚  Level 1: DATABASE CONSTRAINTS (PostgreSQL)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ teams table                                   â”‚ â”‚
â”‚  â”‚ â”œâ”€ UNIQUE(created_by)                        â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ Prevents user from creating 2nd team  â”‚ â”‚
â”‚  â”‚ â””â”€ Foreign key user relationship             â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚ team_members table                            â”‚ â”‚
â”‚  â”‚ â”œâ”€ UNIQUE(team_id, user_id)                  â”‚ â”‚
â”‚  â”‚ â”‚  â””â”€ Prevents user joining same team twice  â”‚ â”‚
â”‚  â”‚ â””â”€ Foreign keys maintain referential integrity â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚ Result: DB returns error if constraint       â”‚ â”‚
â”‚  â”‚         violated (prevents bad data)         â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  Level 2: API VALIDATION (Express Routes)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ POST /api/teams (create)                     â”‚ â”‚
â”‚  â”‚ â”œâ”€ SELECT COUNT(*) FROM team_members        â”‚ â”‚
â”‚  â”‚ â”‚  WHERE user_id = ?                         â”‚ â”‚
â”‚  â”‚ â”œâ”€ if (result > 0) return 400                â”‚ â”‚
â”‚  â”‚ â””â”€ else allow insertion                      â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚ POST /api/teams/:id/join                    â”‚ â”‚
â”‚  â”‚ â”œâ”€ SELECT COUNT(*) FROM team_members        â”‚ â”‚
â”‚  â”‚ â”‚  WHERE user_id = ?                         â”‚ â”‚
â”‚  â”‚ â”œâ”€ if (result > 0) return 400                â”‚ â”‚
â”‚  â”‚ â”‚  "User already has a team"                 â”‚ â”‚
â”‚  â”‚ â””â”€ else allow insertion                      â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚ Result: API returns 400 with error message   â”‚ â”‚
â”‚  â”‚         (prevents operation at app level)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  Level 3: FRONTEND VALIDATION (Flutter UI)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ EventsScreen.build()                         â”‚ â”‚
â”‚  â”‚ â”œâ”€ Calls TeamService.getUserTeam()           â”‚ â”‚
â”‚  â”‚ â”œâ”€ if (userTeam != null) {                   â”‚ â”‚
â”‚  â”‚ â”‚    show "Joined" chip                      â”‚ â”‚
â”‚  â”‚ â”‚    disable join button                     â”‚ â”‚
â”‚  â”‚ â”‚  }                                          â”‚ â”‚
â”‚  â”‚ â””â”€ else {                                     â”‚ â”‚
â”‚  â”‚     show "Join" button (enabled)             â”‚ â”‚
â”‚  â”‚   }                                           â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚ TeamQuestionnaireScreen.build()              â”‚ â”‚
â”‚  â”‚ â”œâ”€ Check if user already in team             â”‚ â”‚
â”‚  â”‚ â””â”€ Disable creation if already in team       â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚ Result: UI won't allow action that would     â”‚ â”‚
â”‚  â”‚         violate constraint (UX feedback)     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                     â”‚
â”‚  Result: Triple-layered protection ensures       â”‚
â”‚  that no user can ever be in multiple teams!    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Team Model                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ - id: int?                                              â”‚
â”‚ - name: String                                          â”‚
â”‚ - school: String                                        â”‚
â”‚ - eventType: String (enum-like)                        â”‚
â”‚ - eventName: String                                     â”‚
â”‚ - memberCount: int                                      â”‚
â”‚ - createdById: int                                      â”‚
â”‚ - createdByUsername: String                            â”‚
â”‚ - createdAt: DateTime                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + toJson(): Map<String, dynamic>                       â”‚
â”‚ + fromJson(Map): Team                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘
                         â”‚ uses
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 TeamService                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [static methods only]                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + fetchTeamsBySchool(String, token): Future<List>    â”‚
â”‚ + createTeam({...}, token): Future<Team?>             â”‚
â”‚ + joinTeam(int, token): Future<bool>                 â”‚
â”‚ + leaveTeam(int, token): Future<bool>                â”‚
â”‚ + getUserTeam(token): Future<Team?>                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘
                         â”‚ uses
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ApiService                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [static methods only]                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + get(String, token): Future<http.Response>          â”‚
â”‚ + post(String, body, token): Future<http.Response>   â”‚
â”‚ + put(String, body, token): Future<http.Response>    â”‚
â”‚ + delete(String, token): Future<http.Response>       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘
                         â”‚ uses
                         â”‚
                    http package
```

---

## Sequence Diagram: Create Team

```
â”Œâ”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚User  â”‚        â”‚Flutter App â”‚        â”‚Backend   â”‚        â”‚Database  â”‚
â””â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚                   â”‚                    â”‚                   â”‚
  â”‚ 1. Tap Create     â”‚                    â”‚                   â”‚
  â”‚ Team Button       â”‚                    â”‚                   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                    â”‚                   â”‚
  â”‚                   â”‚ 2. Show Questionnaire â”‚                   â”‚
  â”‚                   â”‚ â† â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”¤                    â”‚
  â”‚                   â”‚                    â”‚                   â”‚
  â”‚ 3. Fill Form      â”‚                    â”‚                   â”‚
  â”‚ & Click Create    â”‚                    â”‚                   â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                    â”‚                   â”‚
  â”‚                   â”‚ 4. POST /api/teams â”‚                    â”‚
  â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                    â”‚
  â”‚                   â”‚                    â”‚ 5. Verify Token   â”‚
  â”‚                   â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
  â”‚                   â”‚                    â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
  â”‚                   â”‚                    â”‚ 6. Check user     â”‚
  â”‚                   â”‚                    â”‚ not in team       â”‚
  â”‚                   â”‚                    â”‚ 7. INSERT teams.. â”‚
  â”‚                   â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚                   â”‚                    â”‚ 8. INSERT members â”‚
  â”‚                   â”‚                    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚                   â”‚                    â”‚â†â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”¤
  â”‚                   â”‚ 9. 201 Created     â”‚                   â”‚
  â”‚                   â”‚â† â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”¤                    â”‚
  â”‚                   â”‚ 10. Parse & Store  â”‚                   â”‚
  â”‚                   â”‚ 11. Show Toast     â”‚                   â”‚
  â”‚                   â”‚ 12. Refresh List   â”‚                   â”‚
  â”‚ 13. See team      â”‚ â† â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”¤                    â”‚
  â”‚ in list           â”‚                    â”‚                   â”‚
  â”‚â† â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€â”¤                    â”‚                   â”‚
  â”‚                   â”‚                    â”‚                   â”‚
```

---

This architecture ensures:
- âœ… Clean separation of concerns
- âœ… Type-safe data flow
- âœ… Multiple constraint enforcement layers
- âœ… Proper error handling at each level
- âœ… Scalable and maintainable code structure
